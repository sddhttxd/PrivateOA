
@{
    ViewBag.Title = "JBList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <h2>加班记录</h2>
    <form class="form-horizontal" role="form">
        <div class="form-group">
            用户ID：<input id="txtUserID" type="text" />
            年份：<input id="txtYear" type="text" />
            月份：<input id="txtMonth" type="text" /><br />
            开始时间：<input id="dtStartTime" type="text" />
            结束时间：<input id="dtEndTime" type="text" />
            备注关键字：<input id="txtRemark" type="text" />
        </div>
    </form>
    <table class="table table-striped table-bordered table-hover table-condensed"></table>
    <div id="toolbar">
        <button type="button" class="btn btn-info btn-flat" data-toggle="modal" data-target="#AddModal"><i class="glyphicon glyphicon-plus"></i> 添加</button>
        <button type="button" class="btn btn-info btn-flat" data-toggle="modal" data-target="#EditModal"><i class="glyphicon glyphicon-edit"></i> 修改</button>
        <button type="button" class="btn btn-info btn-flat" id="btnDelete"><i class="glyphicon glyphicon-remove"></i> 删除</button>
        <button type="button" class="btn btn-info btn-flat" id="btnSearch"><i class="glyphicon glyphicon-search"></i> 查询</button>
    </div>
    <!--[if lt IE 9]>
        <p style="display:inline-block;font-weight:bold;font-size:16px;"> 您的浏览器(IE8)版本过低这将影响页面速度和美观,请联系运维安装360浏览器或者升级您的IE版本。</p>
    <![endif]-->
</div>

<!-- 添加 -->
<div class="modal" id="AddModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">添加加班记录</h4>
            </div>
            <div class="modal-body">
                <form id="loginform" class="form-horizontal" role="form">
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">开始时间：</label>
                        <div class='input-group date' id='dtStartTime'>
                            <input type='text' class="form-control" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>  
                        @*<div class="col-sm-8">
                            <input id="dtStartTime" class="form-control" type="text" />
                        </div>*@
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">结束时间：</label>
                        <div class='input-group date' id='dtEndTime'>
                            <input type='text' class="form-control" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                        @*<div class="col-sm-8">
                            <input id="dtEndTime" class="form-control" type="text" />
                        </div>*@
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">加班时长：</label>
                        <div class="col-sm-8">
                            <input id="txtHours" class="form-control" type="text" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">加班内容：</label>
                        <div class="col-sm-8">
                            <input id="txtRemark" class="form-control" type="text" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!-- 修改 -->
<div class="modal" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">修改加班记录</h4>
            </div>
            <div class="modal-body">
                <form id="loginform" class="form-horizontal" role="form">
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">开始时间：</label>
                        <div class="col-sm-8">
                            <input id="dtStartTime" class="form-control" type="text" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">结束时间：</label>
                        <div class="col-sm-8">
                            <input id="dtEndTime" class="form-control" type="text" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">加班时长：</label>
                        <div class="col-sm-8">
                            <input id="txtHours" class="form-control" type="text" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-3 control-label">加班内容：</label>
                        <div class="col-sm-8">
                            <input id="txtRemark" class="form-control" type="text" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

@section Scripts {
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/bootstrap-table.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript">
        var data = new Object();
        $(function () {
            query();
        });
        $("#btnSearch").click(function () {
            data.UserName = $("#txtUserID").val();

            query();
        });

        function query() {
            $(".table").bootstrapTable({
                //标题
                title: "加班记录",
                //是否显示下方的分页
                pagination: true,
                //当前页码
                page: 1,
                //每页展示的条数
                rows: 10,
                //表格数据请求的url
                url: "JBList",
                //ajax请求的时候是同步还是异步。true为异步
                async: false,
                //请求方式
                method: 'post',
                //是否可以自定义展示的列（右上角的表格小图标事件）
                customColumns: true,
                //是否展示列标题，即列头
                showThead: true,
                //可以附加查询条件。json方式传递
                qData: user,
                idField: "id",
                //工具条
                toolbar: "#toolbar",
                //是否显示复选框
                withCheckbox: true,
                //是否显示列头的复选框（全选作用）
                titleCheckbox: true,
                //记录为空时的提示信息
                emptyTips: "数据条目为空！",
                //复选框存在的情况下，最多可以选择几个,1代表单选，只能选择一个。0为不限制
                selectedNums: 1,
                //列信息。title为列头，field此列取得数组对象的属性
                columns: [
                         {
                             field: '', title: "序号", formatter: function (value, row, index) {
                                 return index + 1;
                             }
                         },
                         { field: 'UserID', title: "用户ID" },
                         { field: 'UserName', title: '用户名', sortable: true },
                         { field: 'TrueName', title: '姓名', cls: "", sortable: false },
                         { field: 'TellPhone', title: '电话', cls: "hidemobile" },
                         { field: 'Department', title: '部门', cls: "hidemobile" },
                         { field: 'Status', title: '状态', cls: "hidemobile" },
                         { field: 'AddTime', title: '添加时间', cls: "hidemobile" },
                         { field: 'ModifiedTime', title: '修改时间', cls: "hidemobile" },
                         { field: 'Remark', title: '备注', cls: "hidemobile" }
                ],
                //表格加载前，可以在此方法里处理一些逻辑
                onBeforeLoad: function (datagrid) {
                    console.log('开始加载 表格数据');
                },
                //ajax请求成功时调用的方法
                onComplete: function (datagrid) {
                    console.log("数据请求完成！");
                },
                //ajax请求失败处理
                onError: function (datagrid) {
                    console.log("数据请求发生错误！");
                },
                //ajax请求成功返回，表格加载完毕后的处理
                onLoadSuccess: function (obj) {
                    console.log("表格加载成功！");
                }
            })
        }
    </script>
}




